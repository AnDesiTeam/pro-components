"use strict";(self.webpackChunkpro_components=self.webpackChunkpro_components||[]).push([[2749],{87302:function(Ee,ee,n){var ne=n(12342),te=n.n(ne),_e=n(57213),E=n.n(_e),oe=n(6646),J=n(55107),G=n(47230),W=n(89603),H=n(85637),re=n(36681),le=n(84875),r=n.n(le),Q=n(50959),D=n(11527),ae=["key","name"],ie=function(v){var L=v.children,C=v.menus,P=v.onSelect,K=v.className,M=v.style,A=(0,Q.useContext)(W.ZP.ConfigContext),c=A.getPrefixCls,x=c("pro-table-dropdown"),i=(0,G.Q)({onClick:function(b){return P&&P(b.key)},items:C==null?void 0:C.map(function(O){return{label:O.name,key:O.key}})});return(0,D.jsx)(H.Z,E()(E()({},i),{},{className:r()(x,K),children:(0,D.jsxs)(re.ZP,{style:M,children:[L," ",(0,D.jsx)(oe.Z,{})]})}))},Y=function(v){var L=v.className,C=v.style,P=v.onSelect,K=v.menus,M=K===void 0?[]:K,A=v.children,c=(0,Q.useContext)(W.ZP.ConfigContext),x=c.getPrefixCls,i=x("pro-table-dropdown"),O=(0,G.Q)({onClick:function(I){P==null||P(I.key)},items:M.map(function(b){var I=b.key,X=b.name,p=te()(b,ae);return E()(E()({key:I},p),{},{title:p.title,label:X})})});return(0,D.jsx)(H.Z,E()(E()({},O),{},{className:r()(i,L),children:(0,D.jsx)("a",{style:C,children:A||(0,D.jsx)(J.Z,{})})}))};Y.Button=ie,ee.Z=Y},37606:function(Ee,ee,n){var ne=n(52510),te=n.n(ne),_e=n(54306),E=n.n(_e),oe=n(12342),J=n.n(oe),G=n(25359),W=n.n(G),H=n(49811),re=n.n(H),le=n(57213),r=n.n(le),Q=n(66020),D=n(58053),ae=n(36866),ie=n(72528),Y=n(619),z=n(41906),v=n(42517),L=n(8566),C=n(36681),P=n(18240),K=n(82526),M=n(42463),A=n(521),c=n(50959),x=n(33113),i=n(11527),O=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],b=["record","position","creatorButtonText","newRecordType","parentKey","style"],I=c.createContext(void 0);function X(e){var h=e.children,j=e.record,V=e.position,S=e.newRecordType,g=e.parentKey,$=(0,c.useContext)(I);return c.cloneElement(h,r()(r()({},h.props),{},{onClick:function(){var N=re()(W()().mark(function ue(de){var k,q,T,U;return W()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(k=(q=h.props).onClick)===null||k===void 0?void 0:k.call(q,de);case 2:if(U=s.sent,U!==!1){s.next=5;break}return s.abrupt("return");case 5:$==null||(T=$.current)===null||T===void 0||T.addEditRecord(j,{position:V,newRecordType:S,parentKey:g});case 6:case"end":return s.stop()}},ue)}));function R(ue){return N.apply(this,arguments)}return R}()}))}function p(e){var h,j,V=(0,ie.YB)(),S=e.onTableChange,g=e.maxLength,$=e.formItemProps,N=e.recordCreatorProps,R=e.rowKey,ue=e.controlled,de=e.defaultValue,k=e.onChange,q=e.editableFormRef,T=J()(e,O),U=(0,c.useRef)(void 0),Z=(0,c.useRef)(),s=(0,c.useRef)();(0,c.useImperativeHandle)(T.actionRef,function(){return Z.current},[Z.current]);var De=(0,K.default)(function(){return e.value||de||[]},{value:e.value,onChange:e.onChange}),ve=E()(De,2),a=ve[0],Pe=ve[1],y=c.useMemo(function(){return typeof R=="function"?R:function(d,t){return d[R]||t}},[R]),he=function(t){if(typeof t=="number"&&!e.name){if(t>=a.length)return t;var _=a&&a[t];return y==null?void 0:y(_,t)}if((typeof t=="string"||t>=a.length)&&e.name){var o=a.findIndex(function(l,u){var m;return(y==null||(m=y(l,u))===null||m===void 0?void 0:m.toString())===(t==null?void 0:t.toString())});if(o!==-1)return o}return t};(0,c.useImperativeHandle)(q,function(){var d=function(o){var l,u;if(o==null)throw new Error("rowIndex is required");var m=he(o),f=[e.name,(l=m==null?void 0:m.toString())!==null&&l!==void 0?l:""].flat(1).filter(Boolean);return(u=s.current)===null||u===void 0?void 0:u.getFieldValue(f)},t=function(){var o,l=[e.name].flat(1).filter(Boolean);if(Array.isArray(l)&&l.length===0){var u,m=(u=s.current)===null||u===void 0?void 0:u.getFieldsValue();return Array.isArray(m)?m:Object.keys(m).map(function(f){return m[f]})}return(o=s.current)===null||o===void 0?void 0:o.getFieldValue(l)};return r()(r()({},s.current),{},{getRowData:d,getRowsData:t,setRowData:function(o,l){var u,m;if(o==null)throw new Error("rowIndex is required");var f=he(o),w=[e.name,(u=f==null?void 0:f.toString())!==null&&u!==void 0?u:""].flat(1).filter(Boolean),ye=Object.assign({},r()(r()({},d(o)),l||{})),Be=(0,A.default)({},w,ye);return(m=s.current)===null||m===void 0||m.setFieldsValue(Be),!0}})},[e.name,s.current]),(0,c.useEffect)(function(){e.controlled&&a.forEach(function(d,t){var _;(_=s.current)===null||_===void 0||_.setFieldsValue(te()({},y(d,t),d))},{})},[(0,Y.ZP)(a),e.controlled]),(0,c.useEffect)(function(){if(e.name){var d;s.current=e==null||(d=e.editable)===null||d===void 0?void 0:d.form}},[(h=e.editable)===null||h===void 0?void 0:h.form,e.name]);var B=N||{},be=B.record,se=B.position,ge=B.creatorButtonText,Ce=B.newRecordType,Me=B.parentKey,Oe=B.style,Re=J()(B,b),fe=se==="top",F=(0,c.useMemo)(function(){return typeof g=="number"&&g<=(a==null?void 0:a.length)?!1:N!==!1&&(0,i.jsx)(X,{record:(0,z.h)(be,a==null?void 0:a.length,a)||{},position:se,parentKey:(0,z.h)(Me,a==null?void 0:a.length,a),newRecordType:Ce,children:(0,i.jsx)(C.ZP,r()(r()({type:"dashed",style:r()({display:"block",margin:"10px 0",width:"100%"},Oe),icon:(0,i.jsx)(Q.Z,{})},Re),{},{children:ge||V.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[N,g,a==null?void 0:a.length]),Te=(0,c.useMemo)(function(){return F?fe?{components:{header:{wrapper:function(t){var _,o=t.className,l=t.children;return(0,i.jsxs)("thead",{className:o,children:[l,(0,i.jsxs)("tr",{style:{position:"relative"},children:[(0,i.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:F}),(0,i.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(_=T.columns)===null||_===void 0?void 0:_.length,children:F})]})]})}}}}:{tableViewRender:function(t,_){var o,l;return(0,i.jsxs)(i.Fragment,{children:[(o=(l=e.tableViewRender)===null||l===void 0?void 0:l.call(e,t,_))!==null&&o!==void 0?o:_,F]})}}:{}},[fe,F]),me=r()({},e.editable),Ue=(0,v.J)(function(d,t){var _,o,l;if((_=e.editable)===null||_===void 0||(o=_.onValuesChange)===null||o===void 0||o.call(_,d,t),(l=e.onValuesChange)===null||l===void 0||l.call(e,t,d),e.controlled){var u;e==null||(u=e.onChange)===null||u===void 0||u.call(e,t)}});return(e!=null&&e.onValuesChange||(j=e.editable)!==null&&j!==void 0&&j.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(me.onValuesChange=Ue),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Provider,{value:Z,children:(0,i.jsx)(x.Z,r()(r()(r()({search:!1,options:!1,pagination:!1,rowKey:R,revalidateOnFocus:!1},T),Te),{},{tableLayout:"fixed",actionRef:Z,onChange:S,editable:r()(r()({},me),{},{formProps:r()({formRef:s},me.formProps)}),dataSource:a,onDataSourceChange:function(t){if(Pe(t),e.name&&se==="top"){var _,o=(0,A.default)({},[e.name].flat(1).filter(Boolean),t);(_=s.current)===null||_===void 0||_.setFieldsValue(o)}}}))}),e.name?(0,i.jsx)(D.Z,{name:[e.name],children:function(t){var _,o;if(!U.current)return U.current=a,null;var l=(0,M.default)(t,[e.name].flat(1)),u=l==null?void 0:l.find(function(m,f){var w;return!(0,L.A)(m,(w=U.current)===null||w===void 0?void 0:w[f])});return U.current=a,u&&(e==null||(_=e.editable)===null||_===void 0||(o=_.onValuesChange)===null||o===void 0||o.call(_,u,l)),null}}):null]})}function ce(e){var h=ae.ZP.useFormInstance();return e.name?(0,i.jsx)(P.Z.Item,r()(r()({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,shouldUpdate:function(V,S){var g=[e.name].flat(1);try{return JSON.stringify((0,M.default)(V,g))!==JSON.stringify((0,M.default)(S,g))}catch($){return!0}},children:(0,i.jsx)(p,r()(r()({},e),{},{editable:r()(r()({},e.editable),{},{form:h})}))})):(0,i.jsx)(p,r()({},e))}ce.RecordCreator=X,ee.Z=ce}}]);
