"use strict";(self.webpackChunkpro_components=self.webpackChunkpro_components||[]).push([[9618],{49618:function(B,O,e){e.d(O,{default:function(){return X}});var W=e(77117),o=e.n(W),Z=e(28152),A=e.n(Z),L=e(95530),U=e.n(L),V=e(95353),x=e(64303),m=e(95851),D=e(4169),I=e(57247),_=e(89554),K=e(54325),N=e(7970),Y=e(22071),c=e(50959),rr=e(78576),nr=e(23685),er=e(36219),z=e(58787),or=e(28366),Q=e(63180),R=e(11527),lr=["steps","columns","forceUpdate","grid"],ur=function(r){var l=r.steps,t=r.columns,u=r.forceUpdate,a=r.grid,s=U()(r,lr),i=(0,m.d)(s),C=(0,c.useCallback)(function(v){var f,p;(f=(p=i.current).onCurrentChange)===null||f===void 0||f.call(p,v),u([])},[u,i]),F=(0,c.useMemo)(function(){return l==null?void 0:l.map(function(v,f){return(0,c.createElement)(X,o()(o()({grid:a},v),{},{key:f,layoutType:"StepForm",columns:t[f]}))})},[t,a,l]);return(0,R.jsx)(Q.L0,o()(o()({},s),{},{onCurrentChange:C,children:F}))},ar=ur,tr=function(r){var l=r.children;return(0,R.jsx)(R.Fragment,{children:l})},dr=tr,G=e(86961),H=e(2425),sr=function(r,l){if(r.valueType==="dependency"){var t,u,a,s=(t=r.getFieldProps)===null||t===void 0?void 0:t.call(r);return(0,G.noteOnce)(Array.isArray((u=r.name)!==null&&u!==void 0?u:s==null?void 0:s.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),(0,G.noteOnce)(typeof r.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((a=r.name)!==null&&a!==void 0?a:s==null?void 0:s.name)?(0,c.createElement)(H.Z,o()(o()({name:r.name},s),{},{key:r.key}),function(i){return!r.columns||typeof r.columns!="function"?null:l.genItems(r.columns(i))}):null}return!0},vr=e(98253),cr=function(r){if(r.valueType==="divider"){var l;return(0,c.createElement)(vr.Z,o()(o()({},(l=r.getFieldProps)===null||l===void 0?void 0:l.call(r)),{},{key:r.key}))}return!0},fr=e(71770),J=e(35877),yr=function(r,l){var t=l.action,u=l.formRef,a=l.type,s=l.originItem,i=o()(o()({},(0,fr.Z)(r,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:r.name||r.key||r.dataIndex,width:r.width,render:r!=null&&r.render?function(f,p,E){var h,P,S,j;return r==null||(h=r.render)===null||h===void 0?void 0:h.call(r,f,p,E,t==null?void 0:t.current,o()(o()({type:a},r),{},{key:(P=r.key)===null||P===void 0?void 0:P.toString(),formItemProps:(S=r.getFormItemProps)===null||S===void 0?void 0:S.call(r),fieldProps:(j=r.getFieldProps)===null||j===void 0?void 0:j.call(r)}))}:void 0}),C=function(){return(0,R.jsx)(J.Z,o()(o()({},i),{},{ignoreFormItem:!0}))},F=r!=null&&r.renderFormItem?function(f,p){var E,h,P,S,j=(0,K.Y)(o()(o()({},p),{},{onChange:void 0}));return r==null||(E=r.renderFormItem)===null||E===void 0?void 0:E.call(r,o()(o()({type:a},r),{},{key:(h=r.key)===null||h===void 0?void 0:h.toString(),formItemProps:(P=r.getFormItemProps)===null||P===void 0?void 0:P.call(r),fieldProps:(S=r.getFieldProps)===null||S===void 0?void 0:S.call(r),originProps:s}),o()(o()({},j),{},{defaultRender:C,type:a}),u.current)}:void 0,v=function(){if(r!=null&&r.renderFormItem){var p=F==null?void 0:F(null,{});if(!p||r.ignoreFormItem)return p}return(0,c.createElement)(J.Z,o()(o()({},i),{},{key:[r.key,r.index||0].join("-"),renderFormItem:F}))};return r.dependencies?(0,R.jsx)(H.Z,{name:r.dependencies||[],children:v},r.key):v()},pr=e(26031),ir=function(r,l){var t=l.genItems;if(r.valueType==="formList"&&r.dataIndex){var u,a;return!r.columns||!Array.isArray(r.columns)?null:(0,c.createElement)(pr.u,o()(o()({},(u=r.getFormItemProps)===null||u===void 0?void 0:u.call(r)),{},{key:r.key,name:r.dataIndex,label:r.label,initialValue:r.initialValue,colProps:r.colProps,rowProps:r.rowProps},(a=r.getFieldProps)===null||a===void 0?void 0:a.call(r)),t(r.columns))}return!0},Fr=e(43412),hr=function(r,l){var t=l.genItems;if(r.valueType==="formSet"&&r.dataIndex){var u,a;return!r.columns||!Array.isArray(r.columns)?null:(0,c.createElement)(Fr.Z,o()(o()({},(u=r.getFormItemProps)===null||u===void 0?void 0:u.call(r)),{},{key:r.key,initialValue:r.initialValue,name:r.dataIndex,label:r.label,colProps:r.colProps,rowProps:r.rowProps},(a=r.getFieldProps)===null||a===void 0?void 0:a.call(r)),t(r.columns))}return!0},mr=e(17490),Pr=function(r,l){var t=l.genItems;if(r.valueType==="group"){var u;return!r.columns||!Array.isArray(r.columns)?null:(0,R.jsx)(mr.UW,o()(o()({label:r.label,colProps:r.colProps,rowProps:r.rowProps},(u=r.getFieldProps)===null||u===void 0?void 0:u.call(r)),{},{children:t(r.columns)}),r.key)}return!0},Sr=function(r){return r.valueType&&typeof r.valueType=="string"&&["index","indexBorder","option"].includes(r==null?void 0:r.valueType)?null:!0},k=[Sr,Pr,ir,hr,cr,sr],Tr=function(r,l){for(var t=0;t<k.length;t++){var u=k[t],a=u(r,l);if(a!==!0)return a}return yr(r,l)},xr=["columns","layoutType","type","action","shouldUpdate","formRef"],Rr={DrawerForm:rr.a,QueryFilter:or.t,LightFilter:nr.M,StepForm:Q.L0.StepForm,StepsForm:ar,ModalForm:er.Y,Embed:dr,Form:z.A};function Cr(d){var r=d.columns,l=d.layoutType,t=l===void 0?"Form":l,u=d.type,a=u===void 0?"form":u,s=d.action,i=d.shouldUpdate,C=i===void 0?function(g,n){return(0,V.ZP)(g)!==(0,V.ZP)(n)}:i,F=d.formRef,v=U()(d,xr),f=Rr[t]||z.A,p=Y.Z.useForm(),E=A()(p,1),h=E[0],P=Y.Z.useFormInstance(),S=(0,c.useState)([]),j=A()(S,2),Ar=j[1],Vr=(0,c.useState)(function(){return[]}),$=A()(Vr,2),Er=$[0],jr=$[1],T=(0,x.y)(d.form||P||h),b=(0,c.useRef)(),w=(0,m.d)(d),q=(0,D.J)(function(g){return g.filter(function(n){return!(n.hideInForm&&a==="form")}).sort(function(n,y){return y.order||n.order?(y.order||0)-(n.order||0):(y.index||0)-(n.index||0)}).map(function(n,y){var M=(0,I.h)(n.title,n,"form",(0,R.jsx)(_.G,{label:n.title,tooltip:n.tooltip||n.tip})),Dr=(0,K.Y)({title:M,label:M,name:n.name,valueType:(0,I.h)(n.valueType,{}),key:n.key||n.dataIndex||y,columns:n.columns,valueEnum:n.valueEnum,dataIndex:n.dataIndex||n.key,initialValue:n.initialValue,width:n.width,index:n.index,readonly:n.readonly,colSize:n.colSize,colProps:n.colProps,rowProps:n.rowProps,className:n.className,tooltip:n.tooltip||n.tip,dependencies:n.dependencies,proFieldProps:n.proFieldProps,ignoreFormItem:n.ignoreFormItem,getFieldProps:n.fieldProps?function(){return(0,I.h)(n.fieldProps,T.current,n)}:void 0,getFormItemProps:n.formItemProps?function(){return(0,I.h)(n.formItemProps,T.current,n)}:void 0,render:n.render,renderFormItem:n.renderFormItem,renderText:n.renderText,request:n.request,params:n.params,transform:n.transform,convertValue:n.convertValue,debounceTime:n.debounceTime,defaultKeyWords:n.defaultKeyWords});return Tr(Dr,{action:s,type:a,originItem:n,formRef:T,genItems:q})}).filter(function(n){return!!n})}),Zr=(0,c.useCallback)(function(g,n){var y=w.current.onValuesChange;(C===!0||typeof C=="function"&&C(n,b.current))&&jr([]),b.current=n,y==null||y(g,n)},[w,C]),Lr=(0,N.Z)(function(){if(T.current&&!(r.length&&Array.isArray(r[0])))return q(r)},[r,v==null?void 0:v.open,s,a,Er,!!T.current]),Ur=(0,N.Z)(function(){return t==="StepsForm"?{forceUpdate:Ar,columns:r}:{}},[r,t]);return(0,c.useImperativeHandle)(F,function(){return T.current},[T.current]),(0,R.jsx)(f,o()(o()(o()({},Ur),v),{},{onInit:function(n,y){var M;F&&(F.current=y),v==null||(M=v.onInit)===null||M===void 0||M.call(v,n,y),T.current=y},form:d.form||h,formRef:T,onValuesChange:Zr,children:Lr}))}var X=Cr},64303:function(B,O,e){e.d(O,{y:function(){return U}});var W=e(28152),o=e.n(W),Z=e(50959);function A(){var V=(0,Z.useState)(!0),x=o()(V,2),m=x[1],D=(0,Z.useCallback)(function(){return m(function(I){return!I})},[]);return D}var L=e(55304);function U(V){var x=A(),m=(0,L.C)(x,V);return m}},55304:function(B,O,e){e.d(O,{C:function(){return o}});var W=e(50959);function o(Z,A){var L=(0,W.useMemo)(function(){var U={current:A};return new Proxy(U,{set:function(x,m,D){return Object.is(x[m],D)||(x[m]=D,Z(L)),!0}})},[]);return L}}}]);
