"use strict";(self.webpackChunkpro_components=self.webpackChunkpro_components||[]).push([[3105],{83105:function(k,g,e){e.d(g,{default:function(){return J}});var O=e(57213),o=e.n(O),U=e(54306),V=e.n(U),Z=e(12342),D=e.n(Z),E=e(619),R=e(22097),P=e(7207),S=e(41906),W=e(22614),K=e(95839),N=e(18240),s=e(50959),w=e(3711),q=e(2584),_=e(1435),rr=e(97435),nr=e(84954),Y=e(94685),C=e(11527),er=["steps","columns","forceUpdate","grid"],or=function(r){var u=r.steps,d=r.columns,l=r.forceUpdate,a=r.grid,v=D()(r,er),i=(0,P.d)(v),A=(0,s.useCallback)(function(y){var c,p;(c=(p=i.current).onCurrentChange)===null||c===void 0||c.call(p,y),l([])},[l,i]),F=(0,s.useMemo)(function(){return u==null?void 0:u.map(function(y,c){return(0,s.createElement)(J,o()(o()({grid:a},y),{},{key:c,layoutType:"StepForm",columns:d[c]}))})},[d,a,u]);return(0,C.jsx)(Y.L0,o()(o()({},v),{},{onCurrentChange:A,children:F}))},ur=or,lr=function(r){var u=r.children;return(0,C.jsx)(C.Fragment,{children:u})},ar=lr,z=e(99504),Q=e(58053),dr=function(r,u){if(r.valueType==="dependency"){var d,l,a,v=(d=r.getFieldProps)===null||d===void 0?void 0:d.call(r);return(0,z.noteOnce)(Array.isArray((l=r.name)!==null&&l!==void 0?l:v==null?void 0:v.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),(0,z.noteOnce)(typeof r.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((a=r.name)!==null&&a!==void 0?a:v==null?void 0:v.name)?(0,s.createElement)(Q.Z,o()(o()({name:r.name},v),{},{key:r.key}),function(i){return!r.columns||typeof r.columns!="function"?null:u.genItems(r.columns(i))}):null}return!0},tr=e(2859),sr=function(r){if(r.valueType==="divider"){var u;return(0,s.createElement)(tr.Z,o()(o()({},(u=r.getFieldProps)===null||u===void 0?void 0:u.call(r)),{},{key:r.key}))}return!0},vr=e(71770),G=e(25606),cr=function(r,u){var d=u.action,l=u.formRef,a=u.type,v=u.originItem,i=o()(o()({},(0,vr.Z)(r,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:r.name||r.key||r.dataIndex,width:r.width,render:r!=null&&r.render?function(c,p,j){var h,T,x,L;return r==null||(h=r.render)===null||h===void 0?void 0:h.call(r,c,p,j,d==null?void 0:d.current,o()(o()({type:a},r),{},{key:(T=r.key)===null||T===void 0?void 0:T.toString(),formItemProps:(x=r.getFormItemProps)===null||x===void 0?void 0:x.call(r),fieldProps:(L=r.getFieldProps)===null||L===void 0?void 0:L.call(r)}))}:void 0}),A=function(){return(0,C.jsx)(G.Z,o()(o()({},i),{},{ignoreFormItem:!0}))},F=r!=null&&r.renderFormItem?function(c,p){var j,h,T,x,L=(0,K.Y)(o()(o()({},p),{},{onChange:void 0}));return r==null||(j=r.renderFormItem)===null||j===void 0?void 0:j.call(r,o()(o()({type:a},r),{},{key:(h=r.key)===null||h===void 0?void 0:h.toString(),formItemProps:(T=r.getFormItemProps)===null||T===void 0?void 0:T.call(r),fieldProps:(x=r.getFieldProps)===null||x===void 0?void 0:x.call(r),originProps:v}),o()(o()({},L),{},{defaultRender:A,type:a}),l.current)}:void 0,y=function(){if(r!=null&&r.renderFormItem){var p=F==null?void 0:F(null,{});if(!p||r.ignoreFormItem)return p}return(0,s.createElement)(G.Z,o()(o()({},i),{},{key:[r.key,r.index||0].join("-"),renderFormItem:F}))};return r.dependencies?(0,C.jsx)(Q.Z,{name:r.dependencies||[],children:y},r.key):y()},fr=e(67092),yr=function(r,u){var d=u.genItems;if(r.valueType==="formList"&&r.dataIndex){var l,a;return!r.columns||!Array.isArray(r.columns)?null:(0,s.createElement)(fr.u,o()(o()({},(l=r.getFormItemProps)===null||l===void 0?void 0:l.call(r)),{},{key:r.key,name:r.dataIndex,label:r.label,initialValue:r.initialValue,colProps:r.colProps,rowProps:r.rowProps},(a=r.getFieldProps)===null||a===void 0?void 0:a.call(r)),d(r.columns))}return!0},pr=e(65987),ir=function(r,u){var d=u.genItems;if(r.valueType==="formSet"&&r.dataIndex){var l,a;return!r.columns||!Array.isArray(r.columns)?null:(0,s.createElement)(pr.Z,o()(o()({},(l=r.getFormItemProps)===null||l===void 0?void 0:l.call(r)),{},{key:r.key,initialValue:r.initialValue,name:r.dataIndex,label:r.label,colProps:r.colProps,rowProps:r.rowProps},(a=r.getFieldProps)===null||a===void 0?void 0:a.call(r)),d(r.columns))}return!0},Fr=e(67987),hr=function(r,u){var d=u.genItems;if(r.valueType==="group"){var l;return!r.columns||!Array.isArray(r.columns)?null:(0,C.jsx)(Fr.UW,o()(o()({label:r.label,colProps:r.colProps,rowProps:r.rowProps},(l=r.getFieldProps)===null||l===void 0?void 0:l.call(r)),{},{children:d(r.columns)}),r.key)}return!0},mr=function(r){return r.valueType&&typeof r.valueType=="string"&&["index","indexBorder","option"].includes(r==null?void 0:r.valueType)?null:!0},H=[mr,hr,yr,ir,sr,dr],Pr=function(r,u){for(var d=0;d<H.length;d++){var l=H[d],a=l(r,u);if(a!==!0)return a}return cr(r,u)},Sr=["columns","layoutType","type","action","shouldUpdate","formRef"],Tr={DrawerForm:w.a,QueryFilter:nr.t,LightFilter:q.M,StepForm:Y.L0.StepForm,StepsForm:ur,ModalForm:_.Y,Embed:ar};function xr(t){var r=t.columns,u=t.layoutType,d=u===void 0?"Form":u,l=t.type,a=l===void 0?"form":l,v=t.action,i=t.shouldUpdate,A=i===void 0?function(I,n){return(0,E.ZP)(I)!==(0,E.ZP)(n)}:i,F=t.formRef,y=D()(t,Sr),c=Tr[d]||rr.A,p=N.Z.useForm(),j=V()(p,1),h=j[0],T=N.Z.useFormInstance(),x=(0,s.useState)([]),L=V()(x,2),Rr=L[1],Cr=(0,s.useState)(function(){return[]}),X=V()(Cr,2),Ar=X[0],Vr=X[1],m=(0,R.y)(t.form||T||h),$=(0,s.useRef)(),b=(0,P.d)(t),B=(0,s.useCallback)(function(I){return I.filter(function(n){return!(n.hideInForm&&a==="form")}).sort(function(n,f){return f.order||n.order?(f.order||0)-(n.order||0):(f.index||0)-(n.index||0)}).map(function(n,f){var M=(0,S.h)(n.title,n,"form",(0,C.jsx)(W.G,{label:n.title,tooltip:n.tooltip||n.tip})),Ur=(0,K.Y)({title:M,label:M,name:n.name,valueType:(0,S.h)(n.valueType,{}),key:n.key||n.dataIndex||f,columns:n.columns,valueEnum:n.valueEnum,dataIndex:n.dataIndex||n.key,initialValue:n.initialValue,width:n.width,index:n.index,readonly:n.readonly,colSize:n.colSize,colProps:n.colProps,rowProps:n.rowProps,className:n.className,tooltip:n.tooltip||n.tip,dependencies:n.dependencies,proFieldProps:n.proFieldProps,ignoreFormItem:n.ignoreFormItem,getFieldProps:n.fieldProps?function(){return(0,S.h)(n.fieldProps,m.current,n)}:void 0,getFormItemProps:n.formItemProps?function(){return(0,S.h)(n.formItemProps,m.current,n)}:void 0,render:n.render,renderFormItem:n.renderFormItem,renderText:n.renderText,request:n.request,params:n.params,transform:n.transform,convertValue:n.convertValue,debounceTime:n.debounceTime,defaultKeyWords:n.defaultKeyWords});return Pr(Ur,{action:v,type:a,originItem:n,formRef:m,genItems:B})}).filter(function(n){return!!n})},[v,!!m.current,a]),Er=(0,s.useCallback)(function(I,n){var f=b.current.onValuesChange;(A===!0||typeof A=="function"&&A(n,$.current))&&Vr([]),$.current=n,f==null||f(I,n)},[b,A]),jr=(0,s.useMemo)(function(){if(m.current&&!(r.length&&Array.isArray(r[0])))return B(r)},[r,B,Ar,!!m.current]),Lr=(0,s.useMemo)(function(){return d==="StepsForm"?{forceUpdate:Rr,columns:r}:{}},[r,d]);return(0,s.useImperativeHandle)(F,function(){return m.current},[m.current]),(0,C.jsx)(c,o()(o()(o()({},Lr),y),{},{onInit:function(n,f){var M;F&&(F.current=f),y==null||(M=y.onInit)===null||M===void 0||M.call(y,n,f),m.current=f},form:t.form||h,formRef:m,onValuesChange:Er,children:jr}))}var J=xr},22097:function(k,g,e){e.d(g,{y:function(){return D}});var O=e(54306),o=e.n(O),U=e(50959);function V(){var E=(0,U.useState)(!0),R=o()(E,2),P=R[1],S=(0,U.useCallback)(function(){return P(function(W){return!W})},[]);return S}var Z=e(65249);function D(E){var R=V(),P=(0,Z.C)(R,E);return P}},65249:function(k,g,e){e.d(g,{C:function(){return o}});var O=e(50959);function o(U,V){var Z=(0,O.useMemo)(function(){var D={current:V};return new Proxy(D,{set:function(R,P,S){return Object.is(R[P],S)||(R[P]=S,U(Z)),!0}})},[]);return Z}}}]);
