"use strict";(self.webpackChunkpro_components=self.webpackChunkpro_components||[]).push([[5569],{39304:function(oe,I,e){e.r(I);var X=e(25359),D=e.n(X),G=e(49811),S=e.n(G),k=e(54306),K=e.n(k),J=e(4962),R=e(26470),H=e(37835),C=e(64696),m=e(50959),a=e(11527),E=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(j){setTimeout(function(){j(!0)},T)})},B=[{id:624748504,title:"\u6D3B\u52A8\u540D\u79F0\u4E00",readonly:"\u6D3B\u52A8\u540D\u79F0\u4E00",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"open",created_at:"1590486176000",update_at:"1590486176000"},{id:624691229,title:"\u6D3B\u52A8\u540D\u79F0\u4E8C",readonly:"\u6D3B\u52A8\u540D\u79F0\u4E8C",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"closed",created_at:"1590481162000",update_at:"1590481162000"}];I.default=function(){var F=(0,m.useState)([]),T=K()(F,2),j=T[0],$=T[1],b=(0,m.useState)([]),p=K()(b,2),u=p[0],x=p[1],g=(0,m.useState)("bottom"),v=K()(g,2),l=v[0],c=v[1],r=[{title:"\u6D3B\u52A8\u540D\u79F0",dataIndex:"title",tooltip:"\u53EA\u8BFB\uFF0C\u4F7F\u7528form.getFieldValue\u83B7\u53D6\u4E0D\u5230\u503C",formItemProps:function(_,o){var s=o.rowIndex;return{rules:s>1?[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]:[]}},editable:function(_,o,s){return s!==0},width:"15%"},{title:"\u6D3B\u52A8\u540D\u79F0\u4E8C",dataIndex:"readonly",tooltip:"\u53EA\u8BFB\uFF0C\u4F7F\u7528form.getFieldValue\u53EF\u4EE5\u83B7\u53D6\u5230\u503C",readonly:!0,width:"15%"},{title:"\u72B6\u6001",key:"state",dataIndex:"state",valueType:"select",valueEnum:{all:{text:"\u5168\u90E8",status:"Default"},open:{text:"\u672A\u89E3\u51B3",status:"Error"},closed:{text:"\u5DF2\u89E3\u51B3",status:"Success"}}},{title:"\u63CF\u8FF0",dataIndex:"decs",fieldProps:function(_,o){var s=o.rowKey,i=o.rowIndex;return _.getFieldValue([s||"","title"])==="\u4E0D\u597D\u73A9"?{disabled:!0}:i>9?{disabled:!0}:{}}},{title:"\u6D3B\u52A8\u65F6\u95F4",dataIndex:"created_at",valueType:"date"},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(_,o,s,i){return[(0,a.jsx)("a",{onClick:function(){var Z;i==null||(Z=i.startEditable)===null||Z===void 0||Z.call(i,o.id)},children:"\u7F16\u8F91"},"editable"),(0,a.jsx)("a",{onClick:function(){x(u.filter(function(Z){return Z.id!==o.id}))},children:"\u5220\u9664"},"delete")]}}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.Z,{rowKey:"id",headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",maxLength:5,scroll:{x:960},recordCreatorProps:l!=="hidden"?{position:l,record:function(){return{id:(Math.random()*1e6).toFixed(0)}}}:!1,loading:!1,toolBarRender:function(){return[(0,a.jsx)(R.Z.Group,{fieldProps:{value:l,onChange:function(o){return c(o.target.value)}},options:[{label:"\u6DFB\u52A0\u5230\u9876\u90E8",value:"top"},{label:"\u6DFB\u52A0\u5230\u5E95\u90E8",value:"bottom"},{label:"\u9690\u85CF",value:"hidden"}]},"render")]},columns:r,request:S()(D()().mark(function n(){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",{data:B,total:3,success:!0});case 1:case"end":return o.stop()}},n)})),value:u,onChange:x,editable:{type:"multiple",editableKeys:j,onSave:function(){var n=S()(D()().mark(function o(s,i,w){return D()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(s,i,w),t.next=3,E(2e3);case 3:case"end":return t.stop()}},o)}));function _(o,s,i){return n.apply(this,arguments)}return _}(),onChange:$}}),(0,a.jsx)(H.Z,{title:"\u8868\u683C\u6570\u636E",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,a.jsx)(C.Z,{ignoreFormItem:!0,fieldProps:{style:{width:"100%"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(u)})})]})}},99464:function(oe,I,e){e.r(I);var X=e(25359),D=e.n(X),G=e(49811),S=e.n(G),k=e(54306),K=e.n(k),J=e(57213),R=e.n(J),H=e(30565),C=e(4962),m=e(37835),a=e(64696),E=e(50959),B=e(11527),F=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(p){setTimeout(function(){p(!0)},b)})},T=[{id:624748504,title:"\u6D3B\u52A8\u540D\u79F0\u4E00",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"open",created_at:"1590486176000",update_at:"1590486176000",children:[{id:6246912293,title:"\u6D3B\u52A8\u540D\u79F0\u4E8C",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"closed",created_at:"1590481162000",update_at:"1590481162000"}]},{id:624691229,title:"\u6D3B\u52A8\u540D\u79F0\u4E8C",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"closed",created_at:"1590481162000",update_at:"1590481162000"}],j=function $(b,p){return b.map(function(u){if(u.id!==p){if(u.children){var x=$(u.children,p);return R()(R()({},u),{},{children:x.length>0?x:void 0})}return u}return null}).filter(Boolean)};I.default=function(){var $=(0,E.useState)([]),b=K()($,2),p=b[0],u=b[1],x=(0,E.useState)(function(){return T}),g=K()(x,2),v=g[0],l=g[1],c=(0,H.J)(function(n){l(j(v,n.id))}),r=[{title:"\u6D3B\u52A8\u540D\u79F0",dataIndex:"title",formItemProps:function(_,o){var s=o.rowIndex;return{rules:s>2?[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]:[]}},width:"30%"},{title:"\u72B6\u6001",key:"state",dataIndex:"state",valueType:"select",valueEnum:{all:{text:"\u5168\u90E8",status:"Default"},open:{text:"\u672A\u89E3\u51B3",status:"Error"},closed:{text:"\u5DF2\u89E3\u51B3",status:"Success"}}},{title:"\u63CF\u8FF0",dataIndex:"decs",fieldProps:function(_,o){var s=o.rowKey,i=o.rowIndex;return _.getFieldValue([s||"","title"])==="\u4E0D\u597D\u73A9"?{disabled:!0}:i>9?{disabled:!0}:{}}},{title:"\u6D3B\u52A8\u65F6\u95F4",dataIndex:"created_at",valueType:"date"},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(_,o){return[(0,B.jsx)("a",{onClick:function(){c(o)},children:"\u5220\u9664"},"delete")]}}];return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(C.Z,{expandable:{defaultExpandAllRows:!0},scroll:{x:960},rowKey:"id",headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",maxLength:5,recordCreatorProps:{position:"bottom",newRecordType:"dataSource",parentKey:function(){return 624748504},record:function(){return{id:(Math.random()*1e6).toFixed(0)}}},columns:r,value:v,onChange:l,editable:{type:"multiple",editableKeys:p,onSave:function(){var n=S()(D()().mark(function o(s,i,w){return D()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(s,i,w),t.next=3,F(2e3);case 3:case"end":return t.stop()}},o)}));function _(o,s,i){return n.apply(this,arguments)}return _}(),onChange:u}}),(0,B.jsx)(m.Z,{title:"\u8868\u683C\u6570\u636E",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,B.jsx)(a.Z,{ignoreFormItem:!0,fieldProps:{style:{width:"100%"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(v)})})]})}},16268:function(oe,I,e){e.r(I);var X=e(25359),D=e.n(X),G=e(49811),S=e.n(G),k=e(57213),K=e.n(k),J=e(93525),R=e.n(J),H=e(54306),C=e.n(H),m=e(94469),a=e(4962),E=e(37835),B=e(64696),F=e(22803),T=e(81861),j=e(53555),$=e(31071),b=e(66121),p=e(50959),u=e(11527),x=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(n){setTimeout(function(){n(!0)},r)})},g=function(r){var n=r.value,_=r.onChange,o=(0,p.useRef)(null),s=(0,p.useState)([]),i=C()(s,2),w=i[0],Z=i[1],t=(0,p.useState)(""),z=C()(t,2),Y=z[0],N=z[1],V=function(A){N(A.target.value)},O=function(){var A=R()(n||[]);Y&&A.filter(function(q){return q.label===Y}).length===0&&(A=[].concat(R()(A),[{key:"new-".concat(A.length),label:Y}])),_==null||_(A),Z([]),N("")};return(0,u.jsxs)(F.Z,{children:[(n||[]).concat(w).map(function(Q){return(0,u.jsx)(T.Z,{children:Q.label},Q.key)}),(0,u.jsx)(j.Z,{ref:o,type:"text",size:"small",style:{width:78},value:Y,onChange:V,onBlur:O,onPressEnter:O})]})},v=[{id:624748504,title:"\u6D3B\u52A8\u540D\u79F0\u4E00",labels:[{key:"woman",label:"\u5DDD\u59B9\u5B50"}],state:"open",created_at:"1590486176000"},{id:624691229,title:"\u6D3B\u52A8\u540D\u79F0\u4E8C",labels:[{key:"man",label:"\u897F\u5317\u6C49\u5B50"}],state:"closed",created_at:"1590481162000"}],l=[{title:"\u6D3B\u52A8\u540D\u79F0",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"30%"},{title:"\u72B6\u6001",key:"state",dataIndex:"state",valueType:"select",valueEnum:{all:{text:"\u5168\u90E8",status:"Default"},open:{text:"\u672A\u89E3\u51B3",status:"Error"},closed:{text:"\u5DF2\u89E3\u51B3",status:"Success"}}},{title:"\u6807\u7B7E",dataIndex:"labels",width:"20%",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderFormItem:function(r,n){var _=n.isEditable;return _?(0,u.jsx)(g,{}):(0,u.jsx)(j.Z,{})},render:function(r,n){var _;return n==null||(_=n.labels)===null||_===void 0?void 0:_.map(function(o){return(0,u.jsx)(T.Z,{children:o.label},o.key)})}},{title:"\u64CD\u4F5C",valueType:"option",width:250,render:function(r,n,_,o){return[(0,u.jsx)("a",{onClick:function(){var i;o==null||(i=o.startEditable)===null||i===void 0||i.call(o,n.id)},children:"\u7F16\u8F91"},"editable"),(0,u.jsx)(a.Z.RecordCreator,{record:K()(K()({},n),{},{id:(Math.random()*1e6).toFixed(0)}),children:(0,u.jsx)("a",{children:"\u590D\u5236\u6B64\u884C\u5230\u672B\u5C3E"})},"copy")]}}];I.default=function(){var c=(0,p.useRef)(),r=(0,p.useState)([]),n=C()(r,2),_=n[0],o=n[1],s=(0,p.useState)([]),i=C()(s,2),w=i[0],Z=i[1],t=$.Z.useForm(),z=C()(t,1),Y=z[0];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(F.Z,{children:[(0,u.jsx)(b.ZP,{type:"primary",onClick:function(){var V,O;(V=c.current)===null||V===void 0||(O=V.addEditRecord)===null||O===void 0||O.call(V,{id:(Math.random()*1e6).toFixed(0),title:"\u65B0\u7684\u4E00\u884C"})},icon:(0,u.jsx)(m.Z,{}),children:"\u65B0\u5EFA\u4E00\u884C"}),(0,u.jsx)(b.ZP,{onClick:function(){Y.resetFields()},children:"\u91CD\u7F6E\u8868\u5355"},"rest")]}),(0,u.jsx)(a.Z,{rowKey:"id",scroll:{x:960},actionRef:c,headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",maxLength:5,recordCreatorProps:!1,columns:l,request:S()(D()().mark(function N(){return D()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",{data:v,total:3,success:!0});case 1:case"end":return O.stop()}},N)})),value:w,onChange:Z,editable:{form:Y,editableKeys:_,onSave:function(){var N=S()(D()().mark(function O(){return D()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,x(2e3);case 2:case"end":return A.stop()}},O)}));function V(){return N.apply(this,arguments)}return V}(),onChange:o,actionRender:function(V,O,Q){return[Q.save,Q.cancel]}}}),(0,u.jsx)(E.Z,{title:"\u8868\u683C\u6570\u636E",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,u.jsx)(B.Z,{ignoreFormItem:!0,fieldProps:{style:{width:"100%"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(w)})})]})}},56211:function(oe,I,e){e.r(I);var X=e(54306),D=e.n(X),G=e(6175),S=e(4962),k=e(26470),K=e(37835),J=e(43322),R=e(64696),H=e(66121),C=e(50959),m=e(11527),a=[{id:"624748504",title:"\u6D3B\u52A8\u540D\u79F0\u4E00",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"open",created_at:"1590486176000",update_at:"1590486176000"},{id:"624691229",title:"\u6D3B\u52A8\u540D\u79F0\u4E8C",decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"closed",created_at:"1590481162000",update_at:"1590481162000"}],E=0;I.default=function(){var B=(0,C.useState)(function(){return[]}),F=D()(B,2),T=F[0],j=F[1],$=(0,C.useState)("bottom"),b=D()($,2),p=b[0],u=b[1],x=(0,C.useRef)(),g=(0,C.useRef)(),v=[{title:"\u6D3B\u52A8\u540D\u79F0",dataIndex:"title",formItemProps:function(){return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},width:"30%"},{title:"\u72B6\u6001",key:"state",dataIndex:"state",valueType:"select",valueEnum:{all:{text:"\u5168\u90E8",status:"Default"},open:{text:"\u672A\u89E3\u51B3",status:"Error"},closed:{text:"\u5DF2\u89E3\u51B3",status:"Success"}}},{title:"\u63CF\u8FF0",dataIndex:"decs"},{title:"\u6D3B\u52A8\u65F6\u95F4",dataIndex:"created_at",valueType:"date"},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(c,r,n,_){return[(0,m.jsx)("a",{onClick:function(){var s;_==null||(s=_.startEditable)===null||s===void 0||s.call(_,r.id)},children:"\u7F16\u8F91"},"editable"),(0,m.jsx)("a",{onClick:function(){var s,i,w=(s=x.current)===null||s===void 0?void 0:s.getFieldValue("table");(i=x.current)===null||i===void 0||i.setFieldsValue({table:w.filter(function(Z){return Z.id!==r.id})})},children:"\u5220\u9664"},"delete")]}}];return(0,m.jsxs)(G.A,{formRef:x,initialValues:{table:a},validateTrigger:"onBlur",children:[(0,m.jsx)(S.Z,{rowKey:"id",scroll:{x:960},editableFormRef:g,headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",maxLength:5,name:"table",recordCreatorProps:p!=="hidden"?{position:p,record:function(){return{id:(Math.random()*1e6).toFixed(0)}}}:!1,toolBarRender:function(){return[(0,m.jsx)(k.Z.Group,{fieldProps:{style:{marginBlockEnd:0},value:p,onChange:function(r){return u(r.target.value)}},options:[{label:"\u6DFB\u52A0\u5230\u9876\u90E8",value:"top"},{label:"\u6DFB\u52A0\u5230\u5E95\u90E8",value:"bottom"},{label:"\u9690\u85CF",value:"hidden"}]},"render"),(0,m.jsx)(H.ZP,{type:"text",onClick:function(){var r,n,_=(r=g.current)===null||r===void 0||(n=r.getRowsData)===null||n===void 0?void 0:n.call(r);console.log(_)},children:"\u83B7\u53D6 table \u7684\u6570\u636E"},"rows")]},columns:v,editable:{type:"multiple",editableKeys:T,onChange:j,actionRender:function(c,r,n){return[n.save,n.delete||n.cancel,(0,m.jsx)("a",{onClick:function(){var o,s;console.log(r.index),E++,(o=g.current)===null||o===void 0||(s=o.setRowData)===null||s===void 0||s.call(o,r.index,{title:"\u52A8\u6001\u8BBE\u7F6E\u7684title"+E})},children:"\u52A8\u6001\u8BBE\u7F6E\u6B64\u884C"},"set")]}}}),(0,m.jsx)(G.A.Item,{children:(0,m.jsx)(K.Z,{title:"\u8868\u683C\u6570\u636E",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,m.jsx)(J.Z,{name:["table"],children:function(c){var r=c.table;return(0,m.jsx)(R.Z,{ignoreFormItem:!0,fieldProps:{style:{width:"100%"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(r)})}})})})]})}},6413:function(oe,I,e){e.r(I);var X=e(25359),D=e.n(X),G=e(49811),S=e.n(G),k=e(54306),K=e.n(k),J=e(37835),R=e(6175),H=e(43322),C=e(94918),m=e(4962),a=e(50959),E=e(11527),B=[{id:624748504,associate:"\u9898\u5E93\u540D\u79F0\u4E00",questionsNum:10,type:"multiple",scoringMethod:"continuous",fraction:20},{id:624691229,associate:"\u9898\u5E93\u540D\u79F0\u4E8C",questionsNum:10,scoringMethod:"continuous",type:"radio",fraction:20},{id:624748503,associate:"\u9898\u5E93\u540D\u79F0\u4E09",questionsNum:10,type:"judge",scoringMethod:"continuous",fraction:20},{id:624691220,associate:"\u9898\u5E93\u540D\u79F0\u56DB",questionsNum:10,scoringMethod:"continuous",type:"vacant",fraction:20}];I.default=function(){var F=(0,a.useState)(function(){return[]}),T=K()(F,2),j=T[0],$=T[1],b=(0,a.useRef)(),p=(0,a.useRef)(),u=(0,a.useRef)(),x=[{title:"\u5173\u8054\u9898\u5E93",dataIndex:"associate",valueType:"text",ellipsis:!0},{title:"\u9898\u578B",key:"type",dataIndex:"type",valueType:"select",valueEnum:{multiple:{text:"\u591A\u9009\u9898",status:"Default"},radio:{text:"\u5355\u9009\u9898",status:"Warning"},vacant:{text:"\u586B\u7A7A\u9898",status:"Error"},judge:{text:"\u5224\u65AD\u9898",status:"Success"}}},{title:"\u9898\u6570",dataIndex:"questionsNum",valueType:"digit"},{title:"\u8BA1\u5206\u65B9\u5F0F",dataIndex:"scoringMethod",valueType:"select",request:function(){var g=S()(D()().mark(function l(){return D()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",[{value:"discrete",label:"\u79BB\u6563\u578B"},{value:"continuous",label:"\u8FDE\u7EED\u578B"}]);case 1:case"end":return r.stop()}},l)}));function v(){return g.apply(this,arguments)}return v}(),fieldProps:function(v,l){var c=l.rowIndex;return{onSelect:function(){var n,_;(n=u.current)===null||n===void 0||(_=n.setRowData)===null||_===void 0||_.call(n,c,{fraction:[]})}}}},{title:"\u5206\u503C",width:150,dataIndex:"fraction",valueType:function(v){var l=v==null?void 0:v.scoringMethod;return l==="discrete"?"select":"digit"},fieldProps:{mode:"multiple"},request:function(){var g=S()(D()().mark(function l(){return D()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",["A","B","D","E","F"].map(function(n,_){return{label:n,value:_}}));case 1:case"end":return r.stop()}},l)}));function v(){return g.apply(this,arguments)}return v}()},{title:"\u64CD\u4F5C",valueType:"option",render:function(v,l){return[(0,E.jsx)("a",{onClick:function(){var r,n,_=(r=b.current)===null||r===void 0?void 0:r.getFieldValue("table");(n=b.current)===null||n===void 0||n.setFieldsValue({table:_.filter(function(o){return o.id!==(l==null?void 0:l.id)})})},children:"\u79FB\u9664"},"delete"),(0,E.jsx)("a",{onClick:function(){var r;(r=p.current)===null||r===void 0||r.startEditable(l.id)},children:"\u7F16\u8F91"},"edit")]}}];return(0,E.jsx)(J.Z,{children:(0,E.jsx)("div",{style:{maxWidth:800,margin:"auto"},children:(0,E.jsxs)(R.A,{formRef:b,initialValues:{table:B},children:[(0,E.jsx)(H.Z,{name:["table"],children:function(v){var l=v.table,c=l.reduce(function(r,n){return{totalScore:r.totalScore+parseInt(((n==null?void 0:n.fraction)||0).toString(),10),questions:r.questions+parseInt(((n==null?void 0:n.questionsNum)||0).toString(),10)}},{totalScore:0,questions:0});return(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,paddingBlockEnd:16},children:[(0,E.jsxs)("div",{style:{flex:1},children:["\u603B\u5206\uFF1A",c.totalScore]}),(0,E.jsxs)("div",{style:{flex:1},children:["\u9898\u6570\uFF1A",c.questions]}),(0,E.jsx)("div",{style:{flex:2},children:(0,E.jsx)(C.Z,{label:"\u53CA\u683C\u5206"})}),(0,E.jsx)("div",{style:{flex:2},children:(0,E.jsx)(C.Z,{label:"\u8003\u8BD5\u65F6\u95F4(\u5206\u949F)"})})]})}}),(0,E.jsx)(m.Z,{rowKey:"id",scroll:{x:!0},editableFormRef:u,controlled:!0,actionRef:p,formItemProps:{label:"\u9898\u5E93\u7F16\u8F91",rules:[{validator:function(){var g=S()(D()().mark(function l(c,r){return D()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(r.length<1)){_.next=2;break}throw new Error("\u8BF7\u81F3\u5C11\u6DFB\u52A0\u4E00\u4E2A\u9898\u5E93");case 2:if(!(r.length>5)){_.next=4;break}throw new Error("\u6700\u591A\u53EF\u4EE5\u8BBE\u7F6E\u4E94\u4E2A\u9898\u5E93");case 4:case"end":return _.stop()}},l)}));function v(l,c){return g.apply(this,arguments)}return v}()}]},maxLength:10,name:"table",columns:x,recordCreatorProps:{record:function(v){return{id:v+1}}},editable:{type:"multiple",editableKeys:j,onChange:$}})]})})})}},1562:function(oe,I,e){e.r(I);var X=e(54306),D=e.n(X),G=e(4962),S=e(37835),k=e(64696),K=e(66121),J=e(50959),R=e(11527),H=new Array(20).fill(1).map(function(C,m){return{id:(Date.now()+m).toString(),title:"\u6D3B\u52A8\u540D\u79F0".concat(m),decs:"\u8FD9\u4E2A\u6D3B\u52A8\u771F\u597D\u73A9",state:"open",created_at:"1590486176000"}});I.default=function(){var C=(0,J.useState)(function(){return H.map(function(b){return b.id})}),m=D()(C,2),a=m[0],E=m[1],B=(0,J.useState)(function(){return H}),F=D()(B,2),T=F[0],j=F[1],$=[{title:"\u6D3B\u52A8\u540D\u79F0",dataIndex:"title",width:"30%",formItemProps:{rules:[{required:!0,whitespace:!0,message:"\u6B64\u9879\u662F\u5FC5\u586B\u9879"},{message:"\u5FC5\u987B\u5305\u542B\u6570\u5B57",pattern:/[0-9]/},{max:16,whitespace:!0,message:"\u6700\u957F\u4E3A 16 \u4F4D"},{min:6,whitespace:!0,message:"\u6700\u5C0F\u4E3A 6 \u4F4D"}]}},{title:"\u72B6\u6001",key:"state",dataIndex:"state",valueType:"select",valueEnum:{all:{text:"\u5168\u90E8",status:"Default"},open:{text:"\u672A\u89E3\u51B3",status:"Error"},closed:{text:"\u5DF2\u89E3\u51B3",status:"Success"}}},{title:"\u63CF\u8FF0",dataIndex:"decs"},{title:"\u64CD\u4F5C",valueType:"option",width:250,render:function(){return null}}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(G.Z,{headerTitle:"\u53EF\u7F16\u8F91\u8868\u683C",columns:$,rowKey:"id",scroll:{x:960},value:T,onChange:j,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{id:Date.now()}}},toolBarRender:function(){return[(0,R.jsx)(K.ZP,{type:"primary",onClick:function(){console.log(T)},children:"\u4FDD\u5B58\u6570\u636E"},"save")]},editable:{type:"multiple",editableKeys:a,actionRender:function(p,u,x){return[x.delete]},onValuesChange:function(p,u){j(u)},onChange:E}}),(0,R.jsx)(S.Z,{title:"\u8868\u683C\u6570\u636E",headerBordered:!0,collapsible:!0,defaultCollapsed:!0,children:(0,R.jsx)(k.Z,{ignoreFormItem:!0,fieldProps:{style:{width:"100%"}},mode:"read",valueType:"jsonCode",text:JSON.stringify(T)})})]})}},4962:function(oe,I,e){var X=e(52510),D=e.n(X),G=e(54306),S=e.n(G),k=e(12342),K=e.n(k),J=e(25359),R=e.n(J),H=e(49811),C=e.n(H),m=e(57213),a=e.n(m),E=e(94469),B=e(43322),F=e(51385),T=e(84318),j=e(36787),$=e(30565),b=e(14594),p=e(66121),u=e(31071),x=e(96480),g=e(16781),v=e(50151),l=e(50959),c=e(37616),r=e(65042),n=e(11527),_=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],o=["record","position","creatorButtonText","newRecordType","parentKey","style"],s=l.createContext(void 0);function i(t){var z=t.children,Y=t.record,N=t.position,V=t.newRecordType,O=t.parentKey,Q=(0,l.useContext)(s);return l.cloneElement(z,a()(a()({},z.props),{},{onClick:function(){var A=C()(R()().mark(function de(ce){var se,ie,te,ne;return R()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(se=(ie=z.props).onClick)===null||se===void 0?void 0:se.call(ie,ce);case 2:if(ne=L.sent,ne!==!1){L.next=5;break}return L.abrupt("return");case 5:Q==null||(te=Q.current)===null||te===void 0||te.addEditRecord(Y,{position:N,newRecordType:V,parentKey:O});case 6:case"end":return L.stop()}},de)}));function q(de){return A.apply(this,arguments)}return q}()}))}function w(t){var z,Y,N=(0,T.YB)(),V=t.onTableChange,O=t.maxLength,Q=t.formItemProps,A=t.recordCreatorProps,q=t.rowKey,de=t.controlled,ce=t.defaultValue,se=t.onChange,ie=t.editableFormRef,te=K()(t,_),ne=(0,l.useRef)(void 0),ae=(0,l.useRef)(),L=(0,l.useRef)();(0,l.useImperativeHandle)(te.actionRef,function(){return ae.current},[ae.current]);var pe=(0,x.default)(function(){return t.value||ce||[]},{value:t.value,onChange:t.onChange}),he=S()(pe,2),M=he[0],De=he[1],re=l.useMemo(function(){return typeof q=="function"?q:function(U,d){return U[q]||d}},[q]),fe=function(d){if(typeof d=="number"&&!t.name){if(d>=M.length)return d;var h=M&&M[d];return re==null?void 0:re(h,d)}if((typeof d=="string"||d>=M.length)&&t.name){var f=M.findIndex(function(P,y){var W;return(re==null||(W=re(P,y))===null||W===void 0?void 0:W.toString())===(d==null?void 0:d.toString())});if(f!==-1)return f}return d};(0,l.useImperativeHandle)(ie,function(){var U=function(f){var P,y;if(f==null)throw new Error("rowIndex is required");var W=fe(f),ee=[t.name,(P=W==null?void 0:W.toString())!==null&&P!==void 0?P:""].flat(1).filter(Boolean);return(y=L.current)===null||y===void 0?void 0:y.getFieldValue(ee)},d=function(){var f,P=[t.name].flat(1).filter(Boolean);if(Array.isArray(P)&&P.length===0){var y,W=(y=L.current)===null||y===void 0?void 0:y.getFieldsValue();return Array.isArray(W)?W:Object.keys(W).map(function(ee){return W[ee]})}return(f=L.current)===null||f===void 0?void 0:f.getFieldValue(P)};return a()(a()({},L.current),{},{getRowData:U,getRowsData:d,setRowData:function(f,P){var y,W;if(f==null)throw new Error("rowIndex is required");var ee=fe(f),ue=[t.name,(y=ee==null?void 0:ee.toString())!==null&&y!==void 0?y:""].flat(1).filter(Boolean),ye=Object.assign({},a()(a()({},U(f)),P||{})),Ie=(0,v.default)({},ue,ye);return(W=L.current)===null||W===void 0||W.setFieldsValue(Ie),!0}})},[t.name,L.current]),(0,l.useEffect)(function(){t.controlled&&M.forEach(function(U,d){var h;(h=L.current)===null||h===void 0||h.setFieldsValue(D()({},re(U,d),U))},{})},[(0,c.P)(M),t.controlled]),(0,l.useEffect)(function(){if(t.name){var U;L.current=t==null||(U=t.editable)===null||U===void 0?void 0:U.form}},[(z=t.editable)===null||z===void 0?void 0:z.form,t.name]);var _e=A||{},be=_e.record,me=_e.position,Pe=_e.creatorButtonText,ge=_e.newRecordType,Me=_e.parentKey,Oe=_e.style,Ce=K()(_e,o),Ee=me==="top",le=(0,l.useMemo)(function(){return typeof O=="number"&&O<=(M==null?void 0:M.length)?!1:A!==!1&&(0,n.jsx)(i,{record:(0,j.h)(be,M==null?void 0:M.length,M)||{},position:me,parentKey:(0,j.h)(Me,M==null?void 0:M.length,M),newRecordType:ge,children:(0,n.jsx)(p.ZP,a()(a()({type:"dashed",style:a()({display:"block",margin:"10px 0",width:"100%"},Oe),icon:(0,n.jsx)(E.Z,{})},Ce),{},{children:Pe||N.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[A,O,M==null?void 0:M.length]),Re=(0,l.useMemo)(function(){return le?Ee?{components:{header:{wrapper:function(d){var h,f=d.className,P=d.children;return(0,n.jsxs)("thead",{className:f,children:[P,(0,n.jsxs)("tr",{style:{position:"relative"},children:[(0,n.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:le}),(0,n.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(h=te.columns)===null||h===void 0?void 0:h.length,children:le})]})]})}}}}:{tableViewRender:function(d,h){var f,P;return(0,n.jsxs)(n.Fragment,{children:[(f=(P=t.tableViewRender)===null||P===void 0?void 0:P.call(t,d,h))!==null&&f!==void 0?f:h,le]})}}:{}},[Ee,le]),ve=a()({},t.editable),Te=(0,$.J)(function(U,d){var h,f,P;if((h=t.editable)===null||h===void 0||(f=h.onValuesChange)===null||f===void 0||f.call(h,U,d),(P=t.onValuesChange)===null||P===void 0||P.call(t,d,U),t.controlled){var y;t==null||(y=t.onChange)===null||y===void 0||y.call(t,d)}});return(t!=null&&t.onValuesChange||(Y=t.editable)!==null&&Y!==void 0&&Y.onValuesChange||t.controlled&&t!==null&&t!==void 0&&t.onChange)&&(ve.onValuesChange=Te),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Provider,{value:ae,children:(0,n.jsx)(r.Z,a()(a()(a()({search:!1,options:!1,pagination:!1,rowKey:q,revalidateOnFocus:!1},te),Re),{},{tableLayout:"fixed",actionRef:ae,onChange:V,editable:a()(a()({},ve),{},{formProps:a()({formRef:L},ve.formProps)}),dataSource:M,onDataSourceChange:function(d){if(De(d),t.name&&me==="top"){var h,f=(0,v.default)({},[t.name].flat(1).filter(Boolean),d);(h=L.current)===null||h===void 0||h.setFieldsValue(f)}}}))}),t.name?(0,n.jsx)(B.Z,{name:[t.name],children:function(d){var h,f;if(!ne.current)return ne.current=M,null;var P=(0,g.default)(d,[t.name].flat(1)),y=P==null?void 0:P.find(function(W,ee){var ue;return!(0,b.A)(W,(ue=ne.current)===null||ue===void 0?void 0:ue[ee])});return ne.current=M,y&&(t==null||(h=t.editable)===null||h===void 0||(f=h.onValuesChange)===null||f===void 0||f.call(h,y,P)),null}}):null]})}function Z(t){var z=F.ZP.useFormInstance();return t.name?(0,n.jsx)(u.Z.Item,a()(a()({style:{maxWidth:"100%"}},t==null?void 0:t.formItemProps),{},{name:t.name,shouldUpdate:function(N,V){var O=[t.name].flat(1);try{return JSON.stringify((0,g.default)(N,O))!==JSON.stringify((0,g.default)(V,O))}catch(Q){return!0}},children:(0,n.jsx)(w,a()(a()({},t),{},{editable:a()(a()({},t.editable),{},{form:z})}))})):(0,n.jsx)(w,a()({},t))}Z.RecordCreator=i,I.Z=Z}}]);
