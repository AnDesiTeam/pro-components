"use strict";(self.webpackChunkpro_components=self.webpackChunkpro_components||[]).push([[844],{56659:function(Ee,q,n){var ee=n(12342),ne=n.n(ee),te=n(57213),E=n.n(te),_e=n(89547),G=n(14751),H=n(40086),W=n(40539),Q=n(51478),oe=n(90249),re=n(84875),r=n.n(re),Y=n(50959),D=n(11527),le=["key","name"],ae=function(m){var x=m.children,C=m.menus,P=m.onSelect,K=m.className,M=m.style,A=(0,Y.useContext)(W.ZP.ConfigContext),c=A.getPrefixCls,p=c("pro-table-dropdown"),u=(0,H.Q)({onClick:function(b){return P&&P(b.key)},items:C==null?void 0:C.map(function(O){return{label:O.name,key:O.key}})});return(0,D.jsx)(Q.Z,E()(E()({},u),{},{className:r()(p,K),children:(0,D.jsxs)(oe.ZP,{style:M,children:[x," ",(0,D.jsx)(_e.Z,{})]})}))},L=function(m){var x=m.className,C=m.style,P=m.onSelect,K=m.menus,M=K===void 0?[]:K,A=m.children,c=(0,Y.useContext)(W.ZP.ConfigContext),p=c.getPrefixCls,u=p("pro-table-dropdown"),O=(0,H.Q)({onClick:function(I){P==null||P(I.key)},items:M.map(function(b){var I=b.key,z=b.name,V=ne()(b,le);return E()(E()({key:I},V),{},{title:V.title,label:z})})});return(0,D.jsx)(Q.Z,E()(E()({},O),{},{className:r()(u,x),children:(0,D.jsx)("a",{style:C,children:A||(0,D.jsx)(G.Z,{})})}))};L.Button=ae,q.Z=L},49751:function(Ee,q,n){var ee=n(52510),ne=n.n(ee),te=n(54306),E=n.n(te),_e=n(12342),G=n.n(_e),H=n(25359),W=n.n(H),Q=n(49811),oe=n.n(Q),re=n(57213),r=n.n(re),Y=n(36281),D=n(3151),le=n(67390),ae=n(14848),L=n(43973),ie=n(82077),m=n(56786),x=n(3718),C=n(90249),P=n(84215),K=n(96096),M=n(62034),A=n(9288),c=n(50959),p=n(52057),u=n(11527),O=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],b=["record","position","creatorButtonText","newRecordType","parentKey","style"],I=c.createContext(void 0);function z(e){var h=e.children,j=e.record,S=e.position,$=e.newRecordType,g=e.parentKey,N=(0,c.useContext)(I);return c.cloneElement(h,r()(r()({},h.props),{},{onClick:function(){var Z=oe()(W()().mark(function ue(de){var X,k,T,U;return W()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(X=(k=h.props).onClick)===null||X===void 0?void 0:X.call(k,de);case 2:if(U=s.sent,U!==!1){s.next=5;break}return s.abrupt("return");case 5:N==null||(T=N.current)===null||T===void 0||T.addEditRecord(j,{position:S,newRecordType:$,parentKey:g});case 6:case"end":return s.stop()}},ue)}));function R(ue){return Z.apply(this,arguments)}return R}()}))}function V(e){var h,j,S=(0,ae.YB)(),$=e.onTableChange,g=e.maxLength,N=e.formItemProps,Z=e.recordCreatorProps,R=e.rowKey,ue=e.controlled,de=e.defaultValue,X=e.onChange,k=e.editableFormRef,T=G()(e,O),U=(0,c.useRef)(void 0),F=(0,c.useRef)(),s=(0,c.useRef)();(0,c.useImperativeHandle)(T.actionRef,function(){return F.current},[F.current]);var De=(0,K.default)(function(){return e.value||de||[]},{value:e.value,onChange:e.onChange}),he=E()(De,2),a=he[0],Pe=he[1],y=c.useMemo(function(){return typeof R=="function"?R:function(t,d){return t[R]||d}},[R]),se=(0,L.J)(function(t){if(typeof t=="number"&&!e.name){if(t>=a.length)return t;var d=a&&a[t];return y==null?void 0:y(d,t)}if((typeof t=="string"||t>=a.length)&&e.name){var _=a.findIndex(function(o,l){var i;return(y==null||(i=y(o,l))===null||i===void 0?void 0:i.toString())===(t==null?void 0:t.toString())});if(_!==-1)return _}return t});(0,c.useImperativeHandle)(k,function(){var t=function(o){var l,i;if(o==null)throw new Error("rowIndex is required");var v=se(o),f=[e.name,(l=v==null?void 0:v.toString())!==null&&l!==void 0?l:""].flat(1).filter(Boolean);return(i=s.current)===null||i===void 0?void 0:i.getFieldValue(f)},d=function(){var o,l=[e.name].flat(1).filter(Boolean);if(Array.isArray(l)&&l.length===0){var i,v=(i=s.current)===null||i===void 0?void 0:i.getFieldsValue();return Array.isArray(v)?v:Object.keys(v).map(function(f){return v[f]})}return(o=s.current)===null||o===void 0?void 0:o.getFieldValue(l)};return r()(r()({},s.current),{},{getRowData:t,getRowsData:d,setRowData:function(o,l){var i,v;if(o==null)throw new Error("rowIndex is required");var f=se(o),J=[e.name,(i=f==null?void 0:f.toString())!==null&&i!==void 0?i:""].flat(1).filter(Boolean),ye=Object.assign({},r()(r()({},t(o)),l||{})),Be=(0,A.default)({},J,ye);return(v=s.current)===null||v===void 0||v.setFieldsValue(Be),!0}})},[se,e.name,s.current]),(0,c.useEffect)(function(){e.controlled&&a.forEach(function(t,d){var _;(_=s.current)===null||_===void 0||_.setFieldsValue(ne()({},"".concat(y(t,d)),t))},{})},[(0,ie.ZP)(a),e.controlled]),(0,c.useEffect)(function(){if(e.name){var t;s.current=e==null||(t=e.editable)===null||t===void 0?void 0:t.form}},[(h=e.editable)===null||h===void 0?void 0:h.form,e.name]);var B=Z||{},be=B.record,ce=B.position,ge=B.creatorButtonText,Ce=B.newRecordType,Me=B.parentKey,Oe=B.style,Re=G()(B,b),fe=ce==="top",w=(0,c.useMemo)(function(){return typeof g=="number"&&g<=(a==null?void 0:a.length)?!1:Z!==!1&&(0,u.jsx)(z,{record:(0,m.h)(be,a==null?void 0:a.length,a)||{},position:ce,parentKey:(0,m.h)(Me,a==null?void 0:a.length,a),newRecordType:Ce,children:(0,u.jsx)(C.ZP,r()(r()({type:"dashed",style:r()({display:"block",margin:"10px 0",width:"100%"},Oe),icon:(0,u.jsx)(Y.Z,{})},Re),{},{children:ge||S.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[Z,g,a==null?void 0:a.length]),Te=(0,c.useMemo)(function(){return w?fe?{components:{header:{wrapper:function(d){var _,o=d.className,l=d.children;return(0,u.jsxs)("thead",{className:o,children:[l,(0,u.jsxs)("tr",{style:{position:"relative"},children:[(0,u.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:w}),(0,u.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(_=T.columns)===null||_===void 0?void 0:_.length,children:w})]})]})}}}}:{tableViewRender:function(d,_){var o,l;return(0,u.jsxs)(u.Fragment,{children:[(o=(l=e.tableViewRender)===null||l===void 0?void 0:l.call(e,d,_))!==null&&o!==void 0?o:_,w]})}}:{}},[fe,w]),me=r()({},e.editable),Ue=(0,L.J)(function(t,d){var _,o,l;if((_=e.editable)===null||_===void 0||(o=_.onValuesChange)===null||o===void 0||o.call(_,t,d),(l=e.onValuesChange)===null||l===void 0||l.call(e,d,t),e.controlled){var i;e==null||(i=e.onChange)===null||i===void 0||i.call(e,d)}});return(e!=null&&e.onValuesChange||(j=e.editable)!==null&&j!==void 0&&j.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&(me.onValuesChange=Ue),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(I.Provider,{value:F,children:(0,u.jsx)(p.Z,r()(r()(r()({search:!1,options:!1,pagination:!1,rowKey:R,revalidateOnFocus:!1},T),Te),{},{tableLayout:"fixed",actionRef:F,onChange:$,editable:r()(r()({},me),{},{formProps:r()({formRef:s},me.formProps)}),dataSource:a,onDataSourceChange:function(d){if(Pe(d),e.name&&ce==="top"){var _,o=(0,A.default)({},[e.name].flat(1).filter(Boolean),d);(_=s.current)===null||_===void 0||_.setFieldsValue(o)}}}))}),e.name?(0,u.jsx)(D.Z,{name:[e.name],children:function(d){var _,o;if(!U.current)return U.current=a,null;var l=(0,M.default)(d,[e.name].flat(1)),i=l==null?void 0:l.find(function(v,f){var J;return!(0,x.A)(v,(J=U.current)===null||J===void 0?void 0:J[f])});return U.current=a,i&&(e==null||(_=e.editable)===null||_===void 0||(o=_.onValuesChange)===null||o===void 0||o.call(_,i,l)),null}}):null]})}function ve(e){var h=le.ZP.useFormInstance();return e.name?(0,u.jsx)(P.Z.Item,r()(r()({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,shouldUpdate:function(S,$){var g=[e.name].flat(1);try{return JSON.stringify((0,M.default)(S,g))!==JSON.stringify((0,M.default)($,g))}catch(N){return!0}},children:(0,u.jsx)(V,r()(r()({},e),{},{editable:r()(r()({},e.editable),{},{form:h})}))})):(0,u.jsx)(V,r()({},e))}ve.RecordCreator=z,q.Z=ve}}]);
